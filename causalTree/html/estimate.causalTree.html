<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Replace leaf predictions for an 'rpart' object, such as one...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for estimate.causalTree {causalTree}"><tr><td>estimate.causalTree {causalTree}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Replace leaf predictions for an <code>rpart</code> object, such as one generated by <code>causalTree</code>, with estimates of treatment
effects within each leaf, using a new dataset.</h2>

<h3>Description</h3>

<p>Estimate treatment effects within the leaves of a tree (a <code>rpart</code> object) using a new dataset.
</p>


<h3>Usage</h3>

<pre>
estimate.causalTree(object, data, treatment, na.action = na.pass)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>A tree-structured fit <code>rpart</code> object, such as one generated as a <code>causalTree</code> fit.</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>New data frame to be used for estimating effects within leaves.</p>
</td></tr>
<tr valign="top"><td><code>treatment</code></td>
<td>
<p>The treatment status of observations in the new dataframe, where 1 represents treated and 0 represents control.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the leaf contains only treated or control cases, the function will trace back to the leaf's parent node recursively until the parent can be used to compute causal effect.
Please see Athey and Imbens <em>Machine Learning Methods for Estimating Heterogeneous Causal Effects</em> (2015) for details.
</p>


<h3>Value</h3>

<p>An <code>rpart</code> object, where the leaf estimates are treatment effects within the leaves in the input dataset.
</p>


<h3>References</h3>

<p>Susan A., Guido I. (2015)  <em>Recursive Partitioning for Heterogeneous Causal Effects</em>.
</p>


<h3>See Also</h3>

<p><code><a href="honest.causalTree.html">honest.causalTree</a></code>,
<code><a href="causalTree.html">causalTree</a></code>,
<code><a href="../../rpart/html/predict.rpart.html">predict.rpart</a></code>,
</p>


<h3>Examples</h3>

<pre>
fit &lt;- causalTree(y~ x1 + x2 + x3 + x4, data = simulation.1, 
                  treatment = simulation.1$treatment, split.Rule = "CT", 
                  cv.option = "CT", split.Honest = T, 
                  cv.Honest = T, split.Bucket = F, xval = 5, 
                  cp = 0, minsize = 20, propensity = 0.5)
                  
opcp &lt;- fit$cptable[,1][which.min(fit$cptable[,4])]

opfit &lt;- prune(fit, opcp)


honestFit &lt;- estimate.causalTree(opfit, data = simulation.2, 
                                  treatment = simulation.2$treatment)
</pre>

<hr /><div style="text-align: center;">[Package <em>causalTree</em> version 0.0 <a href="00Index.html">Index</a>]</div>
</body></html>
